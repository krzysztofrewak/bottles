<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="utf-8">
    <title>A Multi-Attribute Dataset of Commercial Bottles for Computer Vision Research</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  </head>

  <body class="bg-gray-100 text-gray-900">
    <div x-data="datasetExplorer()" x-init="loadData()" class="max-w-5xl mx-auto py-10">
      <h1 class="text-2xl font-bold">A Multi-Attribute Dataset of Commercial Bottles for Computer Vision Research</h1>
      <h2 class="text-xl mb-6">A statistics tool</h2>
      <div class="grid grid-cols-3 gap-4 mb-8">
        <template x-for="attr in attributes" :key="attr">
          <div>
            <label class="block text-sm font-semibold mb-1" x-text="attr"></label>
            <select class="w-full border rounded p-2" x-model="filters[attr]">
              <option value="">(no filter)</option>
              <template x-for="option in uniqueValues[attr]" :key="option">
                <option x-text="option"></option>
              </template>
            </select>
          </div>
        </template>
      </div>

      <h2 class="text-2xl font-bold mb-4">Statistics</h2>
      <div class="grid grid-cols-3 gap-6">
        <template x-for="attr in attributes" :key="attr">
          <div class="bg-white p-4 rounded shadow">
            <h3 class="font-semibold mb-2" x-text="attr"></h3>
            <template x-for="[key, value] in sortedStats(attr)" :key="key">
              <div class="flex justify-between border-b py-1">
                <span x-text="key"></span> <span class="font-bold" x-text="value"></span>
              </div>
            </template>
            <div class="text-gray-400 flex justify-between py-1">
              <span>total</span> <span x-text="Object.values(stats()[attr]).reduce((a,b)=>a+b,0)"></span>
            </div>
          </div>
        </template>
      </div>

      <footer class="my-8 py-8 text-sm text-gray-600">
        <div class="max-w-5xl mx-auto px-4">
          <div class="flex flex-col md:flex-row md:justify-between gap-6">
            <div>
              <div class="font-semibold mb-2 text-gray-700">GitHub repository</div>
              <a href="https://github.com/krzysztofrewak/bottles" target="_blank" class="text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 .5C5.73.5.5 5.74.5 12.02c0 5.1 3.29 9.43 7.86 10.96.58.11.79-.25.79-.56v-2.1c-3.2.7-3.87-1.55-3.87-1.55-.53-1.35-1.3-1.71-1.3-1.71-1.06-.73.08-.72.08-.72 1.17.08 1.78 1.21 1.78 1.21 1.04 1.8 2.73 1.28 3.4.98.1-.77.41-1.28.75-1.58-2.55-.29-5.23-1.3-5.23-5.79 0-1.28.45-2.33 1.2-3.15-.12-.3-.52-1.52.11-3.16 0 0 .97-.31 3.18 1.2a11.1 11.1 0 0 1 5.8 0c2.2-1.5 3.17-1.2 3.17-1.2.63 1.64.23 2.86.11 3.16.75.82 1.19 1.87 1.19 3.15 0 4.51-2.69 5.49-5.25 5.78.42.37.81 1.1.81 2.22v3.29c0 .32.21.69.8.57A10.99 10.99 0 0 0 23.5 12C23.5 5.73 18.27.5 12 .5Z"/>
                </svg>
                github.com/krzysztofrewak/bottles
              </a>
            </div>

            <div>
              <div class="font-semibold mb-2 text-gray-700">Authors</div>
              <ul class="flex flex-wrap gap-6">
                <li>
                  <a href="https://orcid.org/0000-0001-9109-3350" target="_blank" class="text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-2">
                    <img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" class="w-4 h-4" alt="Mateusz Jackowski"> Mateusz Jackowski
                  </a>
                </li>
                <li>
                  <a href="https://orcid.org/0009-0003-6847-8318" target="_blank" class="text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-2">
                    <img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" class="w-4 h-4" alt="Krzysztof Rewak"> Krzysztof Rewak
                  </a>
                </li>
                <li>
                  <a href="https://orcid.org/0009-0004-6384-825X" target="_blank" class="text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-2">
                    <img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" class="w-4 h-4" alt="Karol Zygadło"> Karol Zygadło
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <script>
      function datasetExplorer() {
        return {
          allData: [],
          attributes: ["type", "color", "fill", "liquid", "label", "cap"],
          filters: { type: "", color: "", fill: "", liquid: "", label: "", cap: "" },
          uniqueValues: {},
          async loadData() {
            const res = await fetch("data.json")
            this.allData = await res.json()

            this.attributes.forEach(attr => {
              this.uniqueValues[attr] = [...new Set(this.allData.map(x => x[attr]))]
            })
          },
          get filteredData() {
            return this.allData.filter(item => {
              return Object.entries(this.filters).every(([k, v]) => {
                return !v || item[k] === v
              })
            })
          },
          stats() {
            const out = {}

            this.attributes.forEach(attr => {
              out[attr] = {}
              this.filteredData.forEach(item => {
                out[attr][item[attr]] = (out[attr][item[attr]] || 0) + 1
              })
            })

            return out
          },
          sortedStats(attr) {
            return Object.entries(this.stats()[attr]).sort((a, b) => b[1] - a[1])
          },
        };
      }
    </script>
  </body>
</html>
